---
title: Proxy
description: Create a high-performance reverse proxy with AzuraJS
category: Features
icon: lucide:globe
order: 5
---

# Proxy üåê

The AzuraJS reverse proxy middleware enables swift request forwarding to external servers. It is an essential tool for unifying API endpoints, bypassing CORS restrictions, or load balancing across microservices.

## Basic Configuration

Integrate the `proxyPlugin` middleware directly into your `AzuraClient` instance to start forwarding requests.

```typescript
import { AzuraClient } from "azurajs";
import { proxyPlugin } from "azurajs/plugins";

const app = new AzuraClient();

// Forward all requests from /api to the backend server
app.use("/api", proxyPlugin("http://localhost:8080"));

await app.listen(3000);
```

## Proxy Options

The `proxyPlugin` accepts a configuration object for precise control over request handling.

```typescript
import { AzuraClient } from "azurajs";
import { proxyPlugin } from "azurajs/plugins";

const app = new AzuraClient();

app.use(
  "/api",
  proxyPlugin("http://localhost:8080", {
    pathRewrite: {
      "^/api": "/",
    },
    headers: {
      "X-Custom-Header": "AzuraJS-Proxy",
    },
    timeout: 5000,
    followRedirects: false,
    preserveHost: true,
    logLevel: "debug",
    onProxyReq: (proxyReq, req) => {
      proxyReq.setHeader("X-Real-IP", req.ip);
    },
    onProxyRes: (proxyRes, req, res) => {
      proxyRes.headers["x-proxied-by"] = "AzuraJS";
    },
    onError: (err, req, res) => {
      res.status(500).json({ error: "Proxy Error", details: err.message });
    },
  }),
);

await app.listen(3000);
```

### Options Details

| Option            | Type                                               | Description                                                    |
| :---------------- | :------------------------------------------------- | :------------------------------------------------------------- |
| `target`          | `string`                                           | **Required**. Base URL of the target server.                   |
| `pathRewrite`     | `Record<string, string>`                           | Regex-based path rewriting rules.                              |
| `headers`         | `Record<string, string>`                           | Custom headers attached to forwarded requests.                 |
| `timeout`         | `number`                                           | Request timeout duration in ms. Default: `30000`.              |
| `followRedirects` | `boolean`                                          | Whether to follow redirects from the target. Default: `false`. |
| `preserveHost`    | `boolean`                                          | Preserves the original `Host` header. Default: `false`.        |
| `logLevel`        | `"info" \| "warn" \| "error" \| "debug" \| "none"` | Verbosity level for proxy logging. Default: `"info"`.          |
| `onProxyReq`      | `Function`                                         | Callback to modify the request before forwarding.              |
| `onProxyRes`      | `Function`                                         | Callback to inspect/modify the response from the target.       |
| `onError`         | `Function`                                         | Callback for handling proxy request failures.                  |

## Next Steps üìñ

- [‚ö° **Cluster Mode**](/docs/en/framework/features/cluster-mode): Combine the proxy with cluster mode for high availability.
- [üåê **CORS**](/docs/en/framework/features/cors): Use the proxy to resolve CORS issues between different origins.
