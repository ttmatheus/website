---
title: Proxy
description: Create a high-performance reverse proxy with AzuraJS
category: Features
icon: lucide:globe
order: 5
---

# Proxy üåê

AzuraJS offers a reverse proxy middleware that allows you to forward requests to other servers. This is useful for unifying APIs, bypassing CORS policies, or load balancing between different services. The proxy plugin is highly configurable and can be used in both `azurajs` and `@azurajs/cdn`.

## Basic Configuration

You can use the `proxyPlugin` middleware directly in your `AzuraClient`:

```typescript
import { AzuraClient } from "azurajs";
import { proxyPlugin } from "azurajs/plugins";

const app = new AzuraClient();

// Forwards all requests to /api to a backend server
app.use("/api", proxyPlugin("http://localhost:8080"));

await app.listen(3000);
```

## Proxy Options

The `proxyPlugin` accepts an options object for more granular control:

```typescript
import { AzuraClient } from "azurajs";
import { proxyPlugin } from "azurajs/plugins";

const app = new AzuraClient();

app.use("/api", proxyPlugin("http://localhost:8080", {
  pathRewrite: {
    "^/api": "/"
  }, // Rewrites the URL path
  headers: {
    "X-Custom-Header": "AzuraJS-Proxy"
  }, // Adds custom headers
  timeout: 5000, // Request timeout in ms
  followRedirects: false, // Do not follow redirects
  preserveHost: true, // Preserve the original Host header
  logLevel: "debug", // Proxy log level (info, warn, error, debug, none)
  onProxyReq: (proxyReq, req) => {
    // Modify the request before sending to the target
    proxyReq.setHeader("X-Real-IP", req.ip);
  },
  onProxyRes: (proxyRes, req, res) => {
    // Modify the target's response before sending to the client
    proxyRes.headers["x-proxied-by"] = "AzuraJS";
  },
  onError: (err, req, res) => {
    // Handle proxy errors
    res.status(500).json({ error: "Proxy Error", details: err.message });
  }
}));

await app.listen(3000);
```

### Options Details

| Option | Type | Description |
| :--- | :--- | :--- |
| `target` | `string` | **Required**. The base URL of the target server. |
| `pathRewrite` | `Record<string, string>` | An object to rewrite the URL path before forwarding. Keys are regex and values are replacement strings. |
| `headers` | `Record<string, string>` | Additional headers to send to the target server. |
| `timeout` | `number` | Timeout in milliseconds for the proxy request. Default: `30000` (30 seconds). |
| `followRedirects` | `boolean` | If `true`, the proxy will follow redirects from the target server. Default: `false`. |
| `preserveHost` | `boolean` | If `true`, the original `Host` header from the client request will be sent to the target. Default: `false`. |
| `logLevel` | `"info" \| "warn" \| "error" \| "debug" \| "none"` | Log level for proxy logs. Default: `"info"`. |
| `onProxyReq` | `(proxyReq, req) => void` | Callback function called before sending the request to the target. Allows modifying `proxyReq`. |
| `onProxyRes` | `(proxyRes, req, res) => void` | Callback function called after receiving the response from the target. Allows modifying `proxyRes` or `res`. |
| `onError` | `(err, req, res) => void` | Callback function to handle errors that occur during the proxy request. |

## Next Steps üìñ

- [‚ö° **Cluster Mode**](/docs/en/framework/features/cluster-mode): Combine the proxy with cluster mode for high availability.
- [üåê **CORS**](/docs/en/framework/features/cors): Use the proxy to resolve CORS issues between different origins.
