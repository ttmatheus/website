---
title: Cluster Mode
description: Leverage all CPU cores to scale your AzuraJS application
category: Features
icon: lucide:server-cog
order: 6
---

# Cluster Mode âš¡

AzuraJS offers native support for cluster mode, allowing your application to utilize all available CPU cores. This is crucial for scaling Node.js and Bun applications, distributing the workload across multiple processes, and significantly improving performance and resilience.

## How It Works

When cluster mode is enabled, AzuraJS creates a *master* process and several *worker* processes. The master process is responsible for managing the workers, restarting them in case of failure, and distributing incoming requests among them. Each worker is an independent instance of your application.

## Configuration

To enable cluster mode, simply set `cluster: true` in your `azura.config.ts` file:

```typescript
// azura.config.ts
import type { ConfigTypes } from "azurajs/config";

const config: ConfigTypes = {
  environment: "production", // Cluster mode is more common in production
  server: {
    port: 3000,
    cluster: true,           // Enables cluster mode
    // workers: 4,            // Optional: specific number of workers (default: number of CPUs)
  },
  // ...
};

export default config;
```

### `cluster` Options

| Property | Type | Description |
| :--- | :--- | :--- |
| `cluster` | `boolean` | If `true`, AzuraJS will start in cluster mode. Default: `false`. |
| `workers` | `number` | Optional. Number of worker processes to create. If not specified, it will use the number of CPU cores. |

## Benefits of Cluster Mode

*   **Improved Performance**: Distributes the load across CPU cores, processing more requests simultaneously.
*   **High Availability**: If a worker process fails, the master can restart it without bringing down the entire application.
*   **Efficient Resource Utilization**: Maximizes the use of server hardware.

## Important Considerations

*   **Shared State**: Avoid storing state in worker process memory, as each is isolated. Use databases, Redis, or other distributed caching solutions for shared state.
*   **Sessions**: If you use sessions, they should be stored in a centralized location (e.g., Redis) so that all workers can access them.
*   **Logging**: Ensure your logging system can handle logs from multiple worker processes (e.g., by sending them to a centralized service like ELK Stack or Grafana Loki).

## Next Steps ðŸ“–

- [ðŸš¨ **Error Handling**](/docs/en/features/error-handling): Understand how to handle errors in a clustered environment.
- [ðŸ“Š **Logger**](/docs/en/features/logger): Configure your logger for cluster mode.
