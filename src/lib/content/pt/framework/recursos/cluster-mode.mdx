---
title: Cluster Mode
description: Aproveite todos os n√∫cleos da CPU para escalar sua aplica√ß√£o AzuraJS
category: Recursos
icon: lucide:server-cog
order: 6
---

# Cluster Mode ‚ö°

O AzuraJS suporta nativamente o modo cluster, permitindo que as aplica√ß√µes utilizem integralmente os n√∫cleos de CPU dispon√≠veis. Essa arquitetura √© vital para escalar aplica√ß√µes Node.js, distribuindo cargas de trabalho entre m√∫ltiplos processos e aprimorando o desempenho e a resili√™ncia do sistema.

## Como Funciona

No modo cluster, o AzuraJS inicia um processo _master_ junto com m√∫ltiplos processos _worker_. O processo master gerencia o ciclo de vida dos workers, reiniciando-os em caso de falha e balanceando as requisi√ß√µes recebidas. Cada worker opera como uma inst√¢ncia independente da aplica√ß√£o.

## Configura√ß√£o

Habilite o modo cluster definindo `cluster: true` no seu arquivo `azura.config.ts`.

```typescript
// azura.config.ts
import type { ConfigTypes } from "azurajs/config";

const config: ConfigTypes = {
  environment: "production",
  server: {
    port: 3000,
    cluster: true,
    // workers: 4, // Opcional: padr√£o √© a contagem de n√∫cleos da CPU
  },
};

export default config;
```

### Op√ß√µes de `cluster`

| Propriedade | Tipo      | Descri√ß√£o                                                          |
| :---------- | :-------- | :----------------------------------------------------------------- |
| `cluster`   | `boolean` | Ativa o modo cluster. Padr√£o: `false`.                             |
| `workers`   | `number`  | N√∫mero de processos worker. Padr√£o √© a contagem de n√∫cleos da CPU. |

## Benef√≠cios do Cluster Mode

- **Performance Aprimorada**: Processamento paralelo de requisi√ß√µes em todos os n√∫cleos da CPU.
- **Alta Disponibilidade**: Toler√¢ncia a falhas atrav√©s de reinicializa√ß√µes autom√°ticas de workers gerenciadas pelo processo master.
- **Utiliza√ß√£o Eficiente de Recursos**: Uso otimizado das capacidades de hardware do servidor.

## Considera√ß√µes Importantes

- **Estado Compartilhado**: Workers s√£o isolados; evite estado em mem√≥ria. Use armazenamentos externos como Redis para dados compartilhados.
- **Sess√µes**: Armazene dados de sess√£o em um local centralizado (ex: Redis) para garantir acessibilidade entre todos os workers.
- **Logging**: Implemente solu√ß√µes centralizadas de log (ex: ELK Stack) para agregar logs de m√∫ltiplos processos.

## Pr√≥ximos Passos üìñ

- [üö® **Tratamento de Erros**](/docs/pt/framework/recursos/error-handling): Entenda como lidar com erros em um ambiente clusterizado.
- [üìä **Logger**](/docs/pt/framework/recursos/logger): Configure seu logger para o modo cluster.
