---
title: Rate Limiting
description: Proteja sua API contra abuso e DDoS com Rate Limiting integrado
category: Recursos
icon: lucide:gauge
order: 4
---

# Rate Limiting üõ°Ô∏è

O AzuraJS oferece um middleware de Rate Limiting integrado que ajuda a proteger sua API contra ataques de for√ßa bruta, abuso e nega√ß√£o de servi√ßo (DDoS) limitando o n√∫mero de requisi√ß√µes que um cliente pode fazer em um determinado per√≠odo.

## Configura√ß√£o Global

Voc√™ pode configurar o Rate Limiting globalmente atrav√©s do seu arquivo `azura.config.ts`:

```typescript
// azura.config.ts
import type { ConfigTypes } from "azurajs/config";

const config: ConfigTypes = {
  // ...
  plugins: {
    rateLimit: {
      enabled: true,           // Habilitar Rate Limiting
      limit: 100,              // M√°ximo de 100 requisi√ß√µes
      timeframe: 60000,        // Por minuto (60000ms)
      // message: "Muitas requisi√ß√µes, tente novamente mais tarde.", // Mensagem personalizada
      // trustProxy: true,      // Se estiver atr√°s de um proxy reverso
    },
  },
};

export default config;
```

### Op√ß√µes de `rateLimit`

| Propriedade | Tipo | Descri√ß√£o |
| :--- | :--- | :--- |
| `enabled` | `boolean` | Ativa ou desativa o middleware de Rate Limiting. Padr√£o: `false`. |
| `limit` | `number` | O n√∫mero m√°ximo de requisi√ß√µes permitidas dentro do `timeframe`. Padr√£o: `60`. |
| `timeframe` | `number` | A janela de tempo em milissegundos para a qual o `limit` se aplica. Padr√£o: `60000` (1 minuto). |
| `message` | `string` | Mensagem de erro personalizada a ser enviada quando o limite √© excedido. Padr√£o: `"Too many requests, please try again later."`. |
| `trustProxy` | `boolean` | Se `true`, o IP do cliente ser√° resolvido a partir dos cabe√ßalhos `X-Forwarded-For`. Padr√£o: `false`. |

## Rate Limiting por Rota/Controller

Para aplicar o Rate Limiting a controllers ou rotas espec√≠ficas, voc√™ pode usar o decorator `@UseMiddleware` com a fun√ß√£o `rateLimit` do AzuraJS.

```typescript
import { Controller, Get, UseMiddleware } from "azurajs/decorators";
import { rateLimit } from "azurajs/plugins";

const tenRequestsPerMinute = rateLimit(10, 60 * 1000);

@Controller("/auth")
export class AuthController {
  @UseMiddleware(tenRequestsPerMinute)
  @Get("/login")
  login() {
    return "P√°gina de Login";
  }

  @UseMiddleware(rateLimit(5, 30 * 1000)) // 5 requisi√ß√µes a cada 30 segundos
  @Post("/register")
  register() {
    return "Registro de Usu√°rio";
  }
}
```

## Como Funciona

O middleware de Rate Limiting rastreia o n√∫mero de requisi√ß√µes de cada IP (ou identificador, se `trustProxy` estiver habilitado) dentro da janela de tempo definida. Se o limite for excedido, ele retorna um status `429 Too Many Requests`.

## Pr√≥ximos Passos üìñ

- [üåê **CORS**](/docs/pt/recursos/cors): Entenda como proteger sua API contra requisi√ß√µes de diferentes origens.
- [üö® **Tratamento de Erros**](/docs/pt/recursos/error-handling): Saiba como personalizar a resposta de erro para o Rate Limiting.
